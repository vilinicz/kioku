(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{295:function(e,t,r){var content=r(304);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(108).default)("1f59dc8a",content,!0,{sourceMap:!1})},296:function(e,t,r){var content=r(306);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(108).default)("75f06f22",content,!0,{sourceMap:!1})},297:function(e,t,r){"use strict";var n=r(2),o=r(4),c=r(36),d=r(27),l=r(43),f=r(203),m=r(11),v=r(3),h=r(204),x=r(140),w=r(298),y=r(299),k=r(83),N=r(300),C=[],_=o(C.sort),z=o(C.push),I=v((function(){C.sort(void 0)})),R=v((function(){C.sort(null)})),A=x("sort"),S=!v((function(){if(k)return k<70;if(!(w&&w>3)){if(y)return!0;if(N)return N<603;var code,e,t,r,n="";for(code=65;code<76;code++){switch(e=String.fromCharCode(code),code){case 66:case 69:case 70:case 72:t=3;break;case 68:case 71:t=4;break;default:t=2}for(r=0;r<47;r++)C.push({k:e+r,v:t})}for(C.sort((function(a,b){return b.v-a.v})),r=0;r<C.length;r++)e=C[r].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}}));n({target:"Array",proto:!0,forced:I||!R||!A||!S},{sort:function(e){void 0!==e&&c(e);var t=d(this);if(S)return void 0===e?_(t):_(t,e);var r,n,o=[],v=l(t);for(n=0;n<v;n++)n in t&&z(o,t[n]);for(h(o,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:m(t)>m(r)?1:-1}}(e)),r=l(o),n=0;n<r;)t[n]=o[n++];for(;n<v;)f(t,n++);return t}})},298:function(e,t,r){"use strict";var n=r(66).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},299:function(e,t,r){"use strict";var n=r(66);e.exports=/MSIE|Trident/.test(n)},300:function(e,t,r){"use strict";var n=r(66).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},301:function(e,t,r){const n=r(302);function o(e,t){t.value!==t.oldValue&&(e.oninput=o.debounce((function(t){e.dispatchEvent(function(e){if("function"==typeof Event)var t=new Event(e);else{(t=document.createEvent("Event")).initEvent(e,!0,!0)}return t}("change"))}),parseInt(t.value)||800))}o.debounce=n,e.exports=o},302:function(e,t){e.exports=function(e,t){var r=null;return function(){clearTimeout(r);var n=arguments,o=this;r=setTimeout((function(){e.apply(o,n)}),t)}}},303:function(e,t,r){"use strict";r(295)},304:function(e,t,r){var n=r(107)((function(i){return i[1]}));n.push([e.i,".face-card[data-v-ee500baa]{display:flex;flex-flow:column;justify-content:center;padding:1rem;transition:all .4s ease,background-color 1.5s ease-in-out}.face-card[data-v-ee500baa]:not(:last-child){border-bottom:1px solid #ebeef5}.face-card .wrapper[data-v-ee500baa]{display:flex;flex-flow:row nowrap}.face-card .image[data-v-ee500baa]{background-color:#f2f6fc;background-position:50%;background-repeat:no-repeat;background-size:cover;border-radius:16px;box-shadow:inset 0 0 10px rgba(0,0,0,.2);flex-shrink:0;height:28vw;margin-right:1rem;max-height:230px;max-width:230px;min-height:100px;min-width:100px;position:relative;width:28vw}.face-card .image .status[data-v-ee500baa]{background-color:#dcdfe6;border-radius:13px;box-shadow:0 0 0 4px #fff;height:26px;position:absolute;right:-8px;top:-8px;width:26px}.face-card .image .status.on[data-v-ee500baa]{background-color:#67c23a}@media(min-width:768px){.face-card .image[data-v-ee500baa]{margin-right:2rem}}.face-card .summary[data-v-ee500baa]{width:100%}.face-card .wrap[data-v-ee500baa]{display:flex;flex-flow:row nowrap}.face-card .wrap .input-name[data-v-ee500baa]{flex-basis:75%;margin-right:1rem}.face-card .wrap .input-room[data-v-ee500baa]{flex-basis:25%;font-weight:500;text-align:right}.face-card .input[data-v-ee500baa]{background-color:#f2f6fc;border-radius:8px;color:#2c3e50;font-size:1.4rem;margin-bottom:1rem;padding:.25rem .5rem;width:100%}@media(min-width:768px){.face-card .input[data-v-ee500baa]{font-size:2.2rem;padding:.25rem 1rem}}.face-card .input-note[data-v-ee500baa]{display:block;font-size:1.2rem;margin-bottom:0;resize:none}@media(min-width:768px){.face-card .input-note[data-v-ee500baa]{font-size:1.75rem}.face-card[data-v-ee500baa]{padding:2rem}}",""]),n.locals={},e.exports=n},305:function(e,t,r){"use strict";r(296)},306:function(e,t,r){var n=r(107)((function(i){return i[1]}));n.push([e.i,'#app{font-family:"Avenir Next",sans-serif;line-height:1.6;min-height:100vh}#app,#app input{color:#303133}.error{background-color:hsla(0,87%,69%,.8);color:#fff;font-weight:700;left:0;padding:.75rem;position:absolute;text-align:center;top:0;width:100%;z-index:99}.cards-enter{background-color:#fefbec;opacity:0;transform:translateY(-30vh)}.cards-enter-to{background-color:#fff;opacity:1;transform:none}.cards-leave-to{opacity:0}.cards-leave-active{position:absolute}',""]),n.locals={},e.exports=n},307:function(e,t,r){"use strict";r.r(t);var n=r(10),o=(r(42),r(46),r(206),r(28),r(44),r(45),r(47),r(48),r(297),r(35),r(16),r(30),r(31),r(24),r(29),r(106),r(205),r(301)),c={name:"FaceCard",directives:{debounce:r.n(o).a},props:{id:{type:Number,default:0},name:{type:String,default:""},room:{type:Number,default:void 0},note:{type:String,default:""},image:{type:String,default:""},datetime:{type:Number,default:0}},data:function(){return{editableName:this.name,editableRoom:this.room,editableNote:this.note,refreshing:null,online:!0,delay:400}},watch:{editableName:function(){this.update()},editableRoom:function(){this.update()},editableNote:function(){this.update()}},beforeDestroy:function(){clearInterval(this.refreshing)},created:function(){this.refresh()},methods:{update:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={name:e.editableName,room:e.editableRoom,note:e.editableNote},t.next=3,e.$axios.patch("faces/".concat(e.id),r);case 3:case"end":return t.stop()}}),t)})))()},refresh:function(){var e=this;this.refreshing=setInterval((function(){var t=(Date.now()-e.datetime)/1e3;e.online=t<e.$config.secondsToOffline,t>e.$config.secondsToHide&&e.$emit("destroy",e.id)}),1e3)}}},d=(r(303),r(100));function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){d=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(d)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var m={components:{FaceCard:Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"face-card"},[t("div",{staticClass:"wrapper"},[t("div",{staticClass:"image",style:{backgroundImage:"url(data:image/jpeg;base64,".concat(e.image,")")}},[t("div",{staticClass:"status",class:{on:e.online}})]),e._v(" "),t("div",{staticClass:"summary"},[t("div",{staticClass:"wrap"},[t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.editableName,expression:"editableName",modifiers:{lazy:!0}},{name:"debounce",rawName:"v-debounce",value:e.delay,expression:"delay"}],staticClass:"input input-name",attrs:{placeholder:"Имя",type:"text"},domProps:{value:e.editableName},on:{change:function(t){e.editableName=t.target.value}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.editableRoom,expression:"editableRoom",modifiers:{lazy:!0}},{name:"debounce",rawName:"v-debounce",value:e.delay,expression:"delay"}],staticClass:"input input-room",attrs:{placeholder:"#",type:"number",min:"0",inputmode:"numeric",pattern:"[0-9]*"},domProps:{value:e.editableRoom},on:{change:function(t){e.editableRoom=t.target.value}}})]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:e.editableNote,expression:"editableNote",modifiers:{lazy:!0}},{name:"debounce",rawName:"v-debounce",value:e.delay,expression:"delay"}],staticClass:"input input-note",attrs:{rows:"4",placeholder:"Дополнительно",type:"text"},domProps:{value:e.editableNote},on:{change:function(t){e.editableNote=t.target.value}}})])])])}),[],!1,null,"ee500baa",null).exports},data:function(){return{polling:null,sorting:null,faces:[],error:void 0}},beforeDestroy:function(){clearInterval(this.polling),clearInterval(this.sorting)},created:function(){this.pollData(),this.sortFaces()},methods:{removeOldFace:function(e){this.faces=this.faces.filter((function(t){return t.id!==e}))},sortFaces:function(){var e=this;this.polling=setInterval((function(){e.faces=e.faces.sort((function(a,b){return b.datetime-a.datetime}))}),2e3)},pollData:function(){var e=this;this.polling=setInterval((function(){e.get()}),1e3)},get:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.prev=1,t.next=4,e.$axios.get("/current_faces/1",{timeout:1e3});case 4:n=t.sent,r=n.data,e.error=void 0,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.error=t.t0;case 12:o=l(r),t.prev=13,d=regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=c.value).id&&(r.datetime=Date.now(),(n=e.faces.find((function(e){return e.id===r.id})))?((Date.now()-n.datetime)/1e3>3&&(n.image=r.image),n.datetime=Date.now()):(8===e.faces.length&&e.faces.pop(),e.faces.unshift(r)));case 2:case"end":return t.stop()}}),t)})),o.s();case 16:if((c=o.n()).done){t.next=20;break}return t.delegateYield(d(),"t1",18);case 18:t.next=16;break;case 20:t.next=25;break;case 22:t.prev=22,t.t2=t.catch(13),o.e(t.t2);case 25:return t.prev=25,o.f(),t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[1,9],[13,22,25,28]])})))()}}},v=(r(305),Object(d.a)(m,(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[e.error?t("div",{staticClass:"error"},[e._v("\n    "+e._s(e.error)+"\n  ")]):e._e(),e._v(" "),t("transition-group",{attrs:{name:"cards",tag:"div"}},e._l(e.faces,(function(r){return t("FaceCard",e._b({key:r.id,on:{destroy:e.removeOldFace}},"FaceCard",r,!1))})),1)],1)}),[],!1,null,null,null));t.default=v.exports}}]);